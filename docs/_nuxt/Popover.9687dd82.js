import{E as A,r as w,D as $,F as le,H as _,a0 as M,G as z,j as ne,N as ae,I as Q,_ as fe,K as be,L as Pe,q as Z,M as V,o as ee,Q as me,w as L,b as G,R as oe,a as ge,c as ye,P as q,U as Se,V as he,a3 as $e}from"./entry.dacc0237.js";import{u as we}from"./usePopper.cf5e9b70.js";import{o as n,u as T,H as X,t as D,N as te,a as C}from"./dom.bfe96e30.js";import{m as Y,E as x,F as Ee,w as ke,h as Fe,P as I,N as O,T as R}from"./use-outside-click.1042b592.js";import{c as Oe,l as K,p as Be}from"./open-closed.dddb8e01.js";import{b as Ce}from"./use-resolve-button-type.8be0fdf6.js";import{V as Ie,p as Me,E as Te,n as ue,d as B}from"./use-root-containers.c1936fd9.js";import{f as U,a as W}from"./hidden.f6e7081c.js";import"./_baseIteratee.2dcf497f.js";import"./_Uint8Array.2001a1b1.js";import"./_baseGet.7027903f.js";import"./get.63e62d79.js";import"./_getAllKeysIn.26012f41.js";var He=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(He||{});let re=Symbol("PopoverContext");function J(e){let m=Q(re,null);if(m===null){let g=new Error(`<${e} /> is missing a parent <${pe.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,J),g}return m}let De=Symbol("PopoverGroupContext");function se(){return Q(De,null)}let ie=Symbol("PopoverPanelContext");function Ne(){return Q(ie,null)}let pe=A({name:"Popover",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:m,attrs:g,expose:F}){var t;let o=w(null);F({el:o,$el:o});let r=w(1),s=w(null),y=w(null),P=w(null),v=w(null),S=$(()=>Y(o)),E=$(()=>{var l,u;if(!n(s)||!n(v))return!1;for(let j of document.querySelectorAll("body > *"))if(Number(j==null?void 0:j.contains(n(s)))^Number(j==null?void 0:j.contains(n(v))))return!0;let p=x(),h=p.indexOf(n(s)),N=(h+p.length-1)%p.length,ve=(h+1)%p.length,ce=p[N],de=p[ve];return!((l=n(v))!=null&&l.contains(ce))&&!((u=n(v))!=null&&u.contains(de))}),c={popoverState:r,buttonId:w(null),panelId:w(null),panel:v,button:s,isPortalled:E,beforePanelSentinel:y,afterPanelSentinel:P,togglePopover(){r.value=T(r.value,{[0]:1,[1]:0})},closePopover(){r.value!==1&&(r.value=1)},close(l){c.closePopover();let u=(()=>l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?n(l):n(c.button):n(c.button))();u==null||u.focus()}};le(re,c),Oe($(()=>T(r.value,{[0]:K.Open,[1]:K.Closed})));let H={buttonId:c.buttonId,panelId:c.panelId,close(){c.closePopover()}},k=se(),d=k==null?void 0:k.registerPopover,[b,i]=Ie(),a=Me({portals:b,defaultContainers:[s,v]});function f(){var l,u,p,h;return(h=k==null?void 0:k.isFocusWithinPopoverGroup())!=null?h:((l=S.value)==null?void 0:l.activeElement)&&(((u=n(s))==null?void 0:u.contains(S.value.activeElement))||((p=n(v))==null?void 0:p.contains(S.value.activeElement)))}return _(()=>d==null?void 0:d(H)),Te((t=S.value)==null?void 0:t.defaultView,"focus",l=>{var u,p;l.target!==window&&l.target instanceof HTMLElement&&r.value===0&&(f()||s&&v&&(a.contains(l.target)||(u=n(c.beforePanelSentinel))!=null&&u.contains(l.target)||(p=n(c.afterPanelSentinel))!=null&&p.contains(l.target)||c.closePopover()))},!0),Ee(a.resolveContainers,(l,u)=>{var p;c.closePopover(),ke(u,Fe.Loose)||(l.preventDefault(),(p=n(s))==null||p.focus())},$(()=>r.value===0)),()=>{let l={open:r.value===0,close:c.close};return M(i,{},()=>X({theirProps:{...e,...g},ourProps:{ref:o},slot:l,slots:m,attrs:g,name:"Popover"}))}}}),je=A({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${D()}`}},inheritAttrs:!1,setup(e,{attrs:m,slots:g,expose:F}){let t=J("PopoverButton"),o=$(()=>Y(t.button));F({el:t.button,$el:t.button}),z(()=>{t.buttonId.value=e.id}),ne(()=>{t.buttonId.value=null});let r=se(),s=r==null?void 0:r.closeOthers,y=Ne(),P=$(()=>y===null?!1:y.value===t.panelId.value),v=w(null),S=`headlessui-focus-sentinel-${D()}`;P.value||_(()=>{t.button.value=v.value});let E=Ce($(()=>({as:e.as,type:m.type})),v);function c(a){var f,l,u,p,h;if(P.value){if(t.popoverState.value===1)return;switch(a.key){case C.Space:case C.Enter:a.preventDefault(),(l=(f=a.target).click)==null||l.call(f),t.closePopover(),(u=n(t.button))==null||u.focus();break}}else switch(a.key){case C.Space:case C.Enter:a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(s==null||s(t.buttonId.value)),t.togglePopover();break;case C.Escape:if(t.popoverState.value!==0)return s==null?void 0:s(t.buttonId.value);if(!n(t.button)||(p=o.value)!=null&&p.activeElement&&!((h=n(t.button))!=null&&h.contains(o.value.activeElement)))return;a.preventDefault(),a.stopPropagation(),t.closePopover();break}}function H(a){P.value||a.key===C.Space&&a.preventDefault()}function k(a){var f,l;e.disabled||(P.value?(t.closePopover(),(f=n(t.button))==null||f.focus()):(a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(s==null||s(t.buttonId.value)),t.togglePopover(),(l=n(t.button))==null||l.focus()))}function d(a){a.preventDefault(),a.stopPropagation()}let b=ue();function i(){let a=n(t.panel);if(!a)return;function f(){T(b.value,{[B.Forwards]:()=>I(a,O.First),[B.Backwards]:()=>I(a,O.Last)})===R.Error&&I(x().filter(l=>l.dataset.headlessuiFocusGuard!=="true"),T(b.value,{[B.Forwards]:O.Next,[B.Backwards]:O.Previous}),{relativeTo:n(t.button)})}f()}return()=>{let a=t.popoverState.value===0,f={open:a},{id:l,...u}=e,p=P.value?{ref:v,type:E.value,onKeydown:c,onClick:k}:{ref:v,id:l,type:E.value,"aria-expanded":e.disabled?void 0:t.popoverState.value===0,"aria-controls":n(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:c,onKeyup:H,onClick:k,onMousedown:d};return M(ae,[X({ourProps:p,theirProps:{...m,...u},slot:f,attrs:m,slots:g,name:"PopoverButton"}),a&&!P.value&&t.isPortalled.value&&M(U,{id:S,features:W.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:i})])}}}),Le=A({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${D()}`}},inheritAttrs:!1,setup(e,{attrs:m,slots:g,expose:F}){let{focus:t}=e,o=J("PopoverPanel"),r=$(()=>Y(o.panel)),s=`headlessui-focus-sentinel-before-${D()}`,y=`headlessui-focus-sentinel-after-${D()}`;F({el:o.panel,$el:o.panel}),z(()=>{o.panelId.value=e.id}),ne(()=>{o.panelId.value=null}),le(ie,o.panelId),_(()=>{var d,b;if(!t||o.popoverState.value!==0||!o.panel)return;let i=(d=r.value)==null?void 0:d.activeElement;(b=n(o.panel))!=null&&b.contains(i)||I(n(o.panel),O.First)});let P=Be(),v=$(()=>P!==null?(P.value&K.Open)===K.Open:o.popoverState.value===0);function S(d){var b,i;switch(d.key){case C.Escape:if(o.popoverState.value!==0||!n(o.panel)||r.value&&!((b=n(o.panel))!=null&&b.contains(r.value.activeElement)))return;d.preventDefault(),d.stopPropagation(),o.closePopover(),(i=n(o.button))==null||i.focus();break}}function E(d){var b,i,a,f,l;let u=d.relatedTarget;u&&n(o.panel)&&((b=n(o.panel))!=null&&b.contains(u)||(o.closePopover(),((a=(i=n(o.beforePanelSentinel))==null?void 0:i.contains)!=null&&a.call(i,u)||(l=(f=n(o.afterPanelSentinel))==null?void 0:f.contains)!=null&&l.call(f,u))&&u.focus({preventScroll:!0})))}let c=ue();function H(){let d=n(o.panel);if(!d)return;function b(){T(c.value,{[B.Forwards]:()=>{var i;I(d,O.First)===R.Error&&((i=n(o.afterPanelSentinel))==null||i.focus())},[B.Backwards]:()=>{var i;(i=n(o.button))==null||i.focus({preventScroll:!0})}})}b()}function k(){let d=n(o.panel);if(!d)return;function b(){T(c.value,{[B.Forwards]:()=>{let i=n(o.button),a=n(o.panel);if(!i)return;let f=x(),l=f.indexOf(i),u=f.slice(0,l+1),p=[...f.slice(l+1),...u];for(let h of p.slice())if(h.dataset.headlessuiFocusGuard==="true"||a!=null&&a.contains(h)){let N=p.indexOf(h);N!==-1&&p.splice(N,1)}I(p,O.First,{sorted:!1})},[B.Backwards]:()=>{var i;I(d,O.Previous)===R.Error&&((i=n(o.button))==null||i.focus())}})}b()}return()=>{let d={open:o.popoverState.value===0,close:o.close},{id:b,focus:i,...a}=e,f={ref:o.panel,id:b,onKeydown:S,onFocusout:t&&o.popoverState.value===0?E:void 0,tabIndex:-1};return X({ourProps:f,theirProps:{...m,...a},attrs:m,slot:d,slots:{...g,default:(...l)=>{var u;return[M(ae,[v.value&&o.isPortalled.value&&M(U,{id:s,ref:o.beforePanelSentinel,features:W.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:H}),(u=g.default)==null?void 0:u.call(g,...l),v.value&&o.isPortalled.value&&M(U,{id:y,ref:o.afterPanelSentinel,features:W.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:k})])]}},features:te.RenderStrategy|te.Static,visible:v.value,name:"PopoverPanel"})}}});const Ke=A({components:{HPopover:pe,HPopoverButton:je,HPopoverPanel:Le},props:{mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:50},closeDelay:{type:Number,default:0},popper:{type:Object,default:()=>({})},ui:{type:Object,default:()=>be.ui.popover}},setup(e){const m=Pe(),g=$(()=>Z({},e.ui,m.ui.popover)),F=$(()=>Z({},e.popper,g.value.popper)),[t,o]=we(F.value),r=w(null);let s=null,y=null;z(()=>{setTimeout(()=>{var c;const S=(c=t.value)==null?void 0:c.$.provides;if(!S)return;const E=Object.getOwnPropertySymbols(S);r.value=E.length&&S[E[0]]},200)});function P(){e.mode!=="hover"||!r.value||(y&&(clearTimeout(y),y=null),r.value.popoverState!==0&&(s=s||setTimeout(()=>{r.value.togglePopover&&r.value.togglePopover(),s=null},e.openDelay)))}function v(){e.mode!=="hover"||!r.value||(s&&(clearTimeout(s),s=null),r.value.popoverState!==1&&(y=y||setTimeout(()=>{r.value.closePopover&&r.value.closePopover(),y=null},e.closeDelay)))}return{ui:g,trigger:t,container:o,onMouseOver:P,onMouseLeave:v}}}),Ae=["disabled"];function Ve(e,m,g,F,t,o){const r=V("HPopoverButton"),s=V("HPopoverPanel"),y=V("HPopover");return ee(),me(y,{class:q(e.ui.wrapper),onMouseleave:e.onMouseLeave},{default:L(({open:P,close:v})=>[G(r,{ref:"trigger",as:"div",disabled:e.disabled,class:"inline-flex w-full",role:"button",onMouseover:e.onMouseOver},{default:L(()=>[oe(e.$slots,"default",{open:P,close:v},()=>[ge("button",{disabled:e.disabled}," Open ",8,Ae)])]),_:2},1032,["disabled","onMouseover"]),P?(ee(),ye("div",{key:0,ref:"container",class:q([e.ui.container,e.ui.width]),onMouseover:m[0]||(m[0]=(...S)=>e.onMouseOver&&e.onMouseOver(...S))},[G(Se,he({appear:""},e.ui.transition),{default:L(()=>[G(s,{class:q([e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow]),static:""},{default:L(()=>[oe(e.$slots,"panel",{open:P,close:v})]),_:2},1032,["class"])]),_:2},1040)],34)):$e("",!0)]),_:3},8,["class","onMouseleave"])}const eo=fe(Ke,[["render",Ve]]);export{eo as default};
